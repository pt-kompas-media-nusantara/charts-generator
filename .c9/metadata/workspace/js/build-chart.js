{"changed":false,"filter":false,"title":"build-chart.js","tooltip":"/js/build-chart.js","value":"//proses add kolom dan baris\n$(\"#bar-chart\").length && ($(\"#btn-add-table-column\").on(\"click\", function(t) {\n    t.preventDefault();\n    var a = $(\"#table-column\").children(\".col-flexible\").length,\n        e = $(\"<div></div>\"),\n        l = $(\"<input>\"),\n        r = $(\"<div></div>\"),\n        o = $(\"<input>\");\n    var cl = 12/a;\n    var clp = 12/(a+1);\n    // if(clp == 2.4){\n    //     clp = 40;\n    // }\n    // else{\n    //     clp;\n    // }\n    ($(\"#table-column\").children(\".col-flexible\").removeClass(\"col-md-\" + cl + \" col-sm-\" + cl + \" col-xs-\" + cl).addClass(\"col-md-\" + clp + \" col-sm-\" + clp + \" col-xs-\" + clp), e.addClass(\"col-flexible col-md-\" + clp + \" col-sm-\" + clp + \" col-xs-\" + clp), l.addClass(\"form-control table-column-names\"), l.attr(\"type\", \"text\"), l.attr(\"maxlength\", 25), e.append(l), $(\"#table-column\").append(e), $(\".table-rows\").children(\".col-flexible\").removeClass(\"col-md-\" + cl + \" col-sm-\" + cl + \" col-xs-\" + cl).addClass(\"col-md-\" + clp + \" col-sm-\" + clp + \" col-xs-\" + clp), r.addClass(\"col-flexible col-md-\" + clp + \" col-sm-\" + clp + \" col-xs-\" + clp), o.addClass(\"form-control table-rows-input\"), o.attr(\"type\", \"text\"), o.attr(\"value\", \"0\"), o.attr(\"maxlength\", 255), r.append(o), $(\".table-rows\").append(r))\n}), \n$(\"#btn-remove-table-column\").on(\"click\", function(t) {\n    t.preventDefault();\n    var a = $(\"#table-column\").children(\".col-flexible\").length;\n    var cl = 12/a;\n    var clp = 12/(a-1);\n    // if(clp == 2.4){\n    //     clp = 40;\n    // }\n    // else{\n    //     clp;\n    // }\n    a > 2 && ($(\"#table-column\").find(\".col-flexible:last-child\").remove(), $(\"#table-column\").children(\".col-flexible\").removeClass(\"col-md-\" + cl + \" col-sm-\" + cl + \" col-xs-\" + cl).addClass(\"col-md-\" + clp + \" col-sm-\" + clp + \" col-xs-\" + clp), $(\".table-rows\").each(function() {\n        $(this).find(\".col-flexible:last-child\").remove(), $(this).children(\".col-flexible\").removeClass(\"col-md-\" + cl + \" col-sm-\" + cl + \" col-xs-\" + cl).addClass(\"col-md-\" + clp + \" col-sm-\" + clp + \" col-xs-\" + clp)\n    }))\n}), \n$(\"#btn-add-table-row\").on(\"click\", function(t) {\n    t.preventDefault();\n    var a, e, l, r,\n        o = $(\"<div></div>\"),\n        n = $(document.createDocumentFragment()),\n        i = $(\"#table-row-length\").children(\".col-flexible\").length,\n        s = $(\"<a></a>\");\n    var ax = $(\".series-content\").length;\n    \n    if(ax <= 3){\n        for (o.addClass(\"table-rows form-group pr series-content\"),r = 0; i > r; r++)\n        a = $(\"<div></div>\"), \n        e = $(\"<input>\"), \n        a.addClass(\"col-flexible col-md-\" + 12 / i + \" col-sm-\" + 12 / i + \" col-xs-\" + 12 / i), \n        e.addClass(\"form-control table-rows-input\"),\n        e.attr(\"type\", \"text\"), e.attr(\"value\", \"0\"),\n        a.append(e), n.append(a);\n     \n        var aa, ee, ll, rr, pp, uu, gg, cc,\n            oo = $(\"<div></div>\"),\n            nn = $(document.createDocumentFragment()),\n            ii = $(\"#legend-row\").children(\".col-flexible\").length;\n        for (oo.addClass(\"form-group legend-content\"),rr = 0; ii > rr; rr++)\n        aa = $(\"<div></div>\"), \n        ee = $(\"<input>\"),\n        ll = 0 === rr ? \"Label Data\" : \"Warna\",\n        pp = 0 === rr ? \"col-flexible col-md-\" + 10 + \" col-sm-\" + 10 + \" col-xs-\" + 10 : \"col-flexible col-md-\" + 2 + \" col-sm-\" + 2 + \" col-xs-\" + 2,\n        uu = 0 === rr ? \"form-control legend-name\" : \"form-control jscolor\",\n        gg = 0 === rr ? \"text\" : \"color\",\n        cc = 0 === rr ? \"\" : \"#434348\",\n        aa.addClass(pp), \n        ee.addClass(uu),\n        ee.attr(\"placeholder\", ll), ee.attr(\"type\", gg), ee.attr(\"value\", cc),\n        aa.append(ee), nn.append(aa);\n     \n        s.addClass(\"btn btn-danger btn-overflow\"), \n        s.attr(\"href\", \"#\"), \n        s.text(\"X\"), \n        o.append(n, s), oo.append(nn), $(\"#new-table-row\").append(o),  $(\"#new-new\").append(oo),\n        s.one(\"click\", function(t) {\n            t.preventDefault(), o.remove(), oo.remove()\n        })\n    }\n    else if(ax > 3){\n        alert('Batas maksimal baris adalah 4');\n    }\n    \n    \n}))\n\n//proses pembuatan highcharts - live output\n$(\"input\").bind(\"keyup change\", function(e){\n    var nama_kolom = [];\n    var all_warna = [];\n    var all_warnaa = [];\n    var nama_kolomm = [];\n    var baris_data = [];\n    var nama_legend = [];\n    var code;\n    var alg;\n    var vralg;\n    var txt_sumber;\n    \n    \n    var lgd = $('input[name=posisilegend]:checked').val();\n    function check_lgd(){\n        \n        if(lgd == 'atastengah'){\n            alg = 'center',vralg = 'top';\n        }else if(lgd == 'ataskiri'){\n            alg = 'left',vralg = 'top';\n        }else if(lgd == 'ataskanan'){\n            alg = 'right',vralg = 'top';\n        }else if(lgd == 'bawahtengah'){\n            alg = 'center',vralg = 'bottom';\n        }else if(lgd == 'bawahkiri'){\n            alg = 'left',vralg = 'bottom';\n        }else if(lgd == 'bawahkanan'){\n            alg = 'right',vralg = 'bottom';\n        }\n    }\n    \n    check_lgd();\n    \n    if($(\"#chart-data-source\").val() != ''){\n        txt_sumber = 'sumber: '+$(\"#chart-data-source\").val().trim();\n    }\n    \n    $('.table-column-names').each(function() {\n        nama_kolom.push(this.value);\n        nama_kolomm.push('\\''+this.value+'\\'');\n    });\n    $('.table-rows-input').each(function() {\n        baris_data.push(this.value);\n    });\n    $('.jscolor').each(function() {\n        all_warna.push(this.value);\n        all_warnaa.push('\\''+this.value+'\\'');\n    });\n    baris_data.map(function (x) { \n        return parseInt(x, 10); \n    });\n    $(\".legend-content input.legend-name\").each(function() {\n        nama_legend.push(this.value);\n    });\n    \n      \n    var i,j,k=0, a=0, b=[], d=[[],[],[],[]];\n    for(i=0;i<$('.series-content').length;i++){\n        b[i] = nama_legend[i];\n    }\n    \n    var jml = baris_data.length/$('.series-content').length;\n    for(j=0;j<baris_data.length;j++){\n        if(j==jml){\n            k=k+1;\n            jml=jml+$('.table-column-names').length;\n            a=0;\n        }\n        d[k][a] = baris_data[j];\n        a=a+1;\n        e.preventDefault();\n    }\n    \n    var jk, all_data=[], data_oke=[];\n    for(jk=0;jk<$('.legend-name').length;jk++){\n        b[jk];\n        parseInt(d[jk], 10);\n        all_data.push('{name: \\''+b[jk]+'\\', data: ['+d[jk]+']}\\n');\n        data_oke.push(JSON.parse('{\"name\": \"'+b[jk]+'\", \"data\": ['+d[jk]+']}'));\n    }\n    \n    \n    function createChart(){\n        Highcharts.chart('result', {\n            colors: all_warna,\n            chart: {\n                type: $('input[name=jenis]:checked').val(),\n                backgroundColor: null\n            },\n            title: {\n                text: $('#chart-title').val().trim()\n            },\n            subtitle: {\n                text: txt_sumber,\n                align: 'right',\n                verticalAlign: 'bottom',\n                floating: false,\n            },\n            xAxis: {\n                categories: nama_kolom,\n                title: {\n                    text: $('#judul_kolom').val().trim()\n                }\n            },\n            yAxis: {\n                min: 0,\n                title: {\n                    text: $('#judul_baris').val().trim()\n                },\n                labels: {\n                    overflow: 'justify'\n                }\n            },\n            tooltip: {\n                shared: true\n            },\n            plotOptions: {\n                bar: {\n                    dataLabels: {\n                        enabled: true\n                    }\n                }\n            },\n            legend: {\n                align: alg,\n                verticalAlign: vralg,\n                floating: false,\n                backgroundColor: null\n            },\n            credits: {\n                enabled: false\n            },\n            series: data_oke\n        });\n    }\n    // $('input').each(function() {\n    //     if($(this).val()==''){\n    //         $(this).css('background','#ffe9e9');\n    //     }\n    //     else{\n    //         $(this).css('background','transparent');\n    //     }\n    // });\n    createChart();\n});\n\n//proses pembuatan highcharts - submit\n$(\"#proses-form\").submit(function(e){\n    var theId = $('#chart-title').val().replace(/ /g,'').toLowerCase();\n    var nama_kolom = [];\n    var all_warna = [];\n    var all_warnaa = [];\n    var nama_kolomm = [];\n    var baris_data = [];\n    var nama_legend = [];\n    var code;\n    var alg;\n    var vralg;\n    var txt_sumber;\n    \n    \n    var lgd = $('input[name=posisilegend]:checked').val();\n    function check_lgd(){\n        \n        if(lgd == 'atastengah'){\n            alg = 'center',vralg = 'top';\n        }else if(lgd == 'ataskiri'){\n            alg = 'left',vralg = 'top';\n        }else if(lgd == 'ataskanan'){\n            alg = 'right',vralg = 'top';\n        }else if(lgd == 'bawahtengah'){\n            alg = 'center',vralg = 'bottom';\n        }else if(lgd == 'bawahkiri'){\n            alg = 'left',vralg = 'bottom';\n        }else if(lgd == 'bawahkanan'){\n            alg = 'right',vralg = 'bottom';\n        }\n    }\n    \n    check_lgd();\n    \n    if($(\"#chart-data-source\").val() != ''){\n        txt_sumber = 'sumber: '+$(\"#chart-data-source\").val().trim();\n    }\n    \n    $('.table-column-names').each(function() {\n        nama_kolom.push(this.value);\n        nama_kolomm.push('\\''+this.value+'\\'');\n    });\n    $('.table-rows-input').each(function() {\n        baris_data.push(this.value);\n    });\n    $('.jscolor').each(function() {\n        all_warna.push(this.value);\n        all_warnaa.push('\\''+this.value+'\\'');\n    });\n    baris_data.map(function (x) { \n        return parseInt(x, 10); \n    });\n    $(\".legend-content input.legend-name\").each(function() {\n        nama_legend.push(this.value);\n    });\n    \n      \n    var i,j,k=0, a=0, b=[], d=[[],[],[],[]];\n    for(i=0;i<$('.series-content').length;i++){\n        b[i] = nama_legend[i];\n    }\n    \n    var jml = baris_data.length/$('.series-content').length;\n            console.log(jml);\n    for(j=0;j<baris_data.length;j++){\n        if(j==jml){\n            k=k+1;\n            jml=jml+$('.table-column-names').length;\n            a=0;\n        }\n        d[k][a] = baris_data[j];\n        a=a+1;\n        e.preventDefault();\n    }\n    \n    var jk, all_data=[], data_oke=[];\n    for(jk=0;jk<$('.legend-name').length;jk++){\n        b[jk];\n        parseInt(d[jk], 10);\n        all_data.push('{name: \\''+b[jk]+'\\', data: ['+d[jk]+']}\\n');\n        data_oke.push(JSON.parse('{\"name\": \"'+b[jk]+'\", \"data\": ['+d[jk]+']}'));\n    }\n    \n    \n    function createChart(){\n        Highcharts.chart('result', {\n            colors: all_warna,\n            chart: {\n                type: $('input[name=jenis]:checked').val(),\n                backgroundColor: null\n            },\n            title: {\n                text: $('#chart-title').val().trim()\n            },\n            subtitle: {\n                text: txt_sumber,\n                align: 'right',\n                verticalAlign: 'bottom',\n                floating: false,\n            },\n            xAxis: {\n                categories: nama_kolom,\n                title: {\n                    text: $('#judul_kolom').val().trim()\n                }\n            },\n            yAxis: {\n                min: 0,\n                title: {\n                    text: $('#judul_baris').val().trim()\n                },\n                labels: {\n                    overflow: 'justify'\n                }\n            },\n            tooltip: {\n                shared: true\n            },\n            plotOptions: {\n                bar: {\n                    dataLabels: {\n                        enabled: true\n                    }\n                }\n            },\n            legend: {\n                align: alg,\n                verticalAlign: vralg,\n                floating: false,\n                backgroundColor: null,\n            },\n            credits: {\n                enabled: false\n            },\n            series: data_oke\n        });\n    }\n    \n    \n    function createBody(){\n        code ='<div style=\"padding-bottom: 20px;\">\\n';\n        code+=' <div id=\\\"'+theId+'\\\" style=\"width: 100%;\"></div>\\n';\n        code+='</div>\\n';\n        code+='<script src=\"https://code.highcharts.com/highcharts.js\"></script>\\n';\n        code+='<script type=\"text/javascript\">\\n';\n        code+='   Highcharts.chart(\\''+theId+'\\', {\\n';\n        code+='       colors: ['+all_warnaa+'],\\n';\n        code+='       chart: {\\n';\n        code+='            type:\\''+ $('input[name=jenis]:checked').val() +'\\',\\n';\n        code+='            backgroundColor: null'\n        code+='     },\\n';\n        code+='     title: {\\n';\n        code+='         text:\\''+ $('#chart-title').val().trim()+'\\'\\n';\n        code+='     },\\n';\n        code+='     subtitle: {\\n';\n        code+='         text: \\''+txt_sumber+'\\',\\n';\n        code+='         align: \\'right\\',\\n';\n        code+='         verticalAlign: \\'bottom\\',\\n';\n        code+='         floating: false,\\n';\n        code+='     },\\n';\n        code+='     xAxis: {\\n';\n        code+='         categories: ['+nama_kolomm+'],\\n';\n        code+='         title: {\\n';\n        code+='             text:\\''+ $('#judul_kolom').val().trim()+'\\'\\n';\n        code+='         }\\n';\n        code+='     },\\n';\n        code+='     yAxis: {\\n';\n        code+='         min: 0,\\n';\n        code+='         title: {\\n';\n        code+='             text:\\''+ $('#judul_baris').val().trim()+'\\'\\n';\n        code+='         },\\n';\n        code+='         labels: {\\n';\n        code+='             overflow: \\'justify\\'\\n';\n        code+='         }\\n';\n        code+='     },\\n';\n        code+='     tooltip: {\\n';\n        code+='         shared: true \\n';\n        code+='     },\\n';\n        code+='     plotOptions: {\\n';\n        code+='         bar: {\\n';\n        code+='             dataLabels: {\\n';\n        code+='                 enabled: true\\n';\n        code+='             }\\n';\n        code+='         }\\n';\n        code+='     },\\n';\n        code+='     legend: {\\n';\n        code+='         align:\\'' +alg+'\\',\\n';\n        code+='         verticalAlign:\\''+ vralg+'\\',\\n';\n        code+='         floating: false,\\n';\n        code+='         backgroundColor: null,\\n';\n        code+='     },\\n';\n        code+='     credits: {enabled: false},\\n';\n        code+='     series: [\\n'+           all_data+'        ]\\n';\n        code+=' });\\n';\n    \tcode+='</script>';\n        \n        $('#chart-code').text(code).css('height','1200px');  \n    }\n    \n    \n    \n    $('input').each(function() {\n        if($(this).val()==''){\n            $(this).css('background','#ffe9e9');\n        }\n        else{\n            $(this).css('background','transparent');\n            createBody();\n        }\n    });\n    \n    \n    createChart();\n    e.preventDefault();\n});","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[{"start":{"row":1,"column":79},"end":{"row":17,"column":0},"placeholder":"..."},{"start":{"row":18,"column":55},"end":{"row":32,"column":0},"placeholder":"..."},{"start":{"row":33,"column":49},"end":{"row":81,"column":0},"placeholder":"..."},{"start":{"row":98,"column":25},"end":{"row":113,"column":4},"placeholder":"..."},{"start":{"row":117,"column":44},"end":{"row":119,"column":4},"placeholder":"..."},{"start":{"row":121,"column":46},"end":{"row":124,"column":4},"placeholder":"..."},{"start":{"row":125,"column":44},"end":{"row":127,"column":4},"placeholder":"..."},{"start":{"row":128,"column":35},"end":{"row":131,"column":4},"placeholder":"..."},{"start":{"row":135,"column":60},"end":{"row":137,"column":4},"placeholder":"..."},{"start":{"row":141,"column":47},"end":{"row":143,"column":4},"placeholder":"..."},{"start":{"row":146,"column":37},"end":{"row":155,"column":4},"placeholder":"..."},{"start":{"row":158,"column":47},"end":{"row":163,"column":4},"placeholder":"..."},{"start":{"row":166,"column":27},"end":{"row":218,"column":4},"placeholder":"..."},{"start":{"row":265,"column":44},"end":{"row":267,"column":4},"placeholder":"..."},{"start":{"row":269,"column":46},"end":{"row":272,"column":4},"placeholder":"..."},{"start":{"row":273,"column":44},"end":{"row":275,"column":4},"placeholder":"..."},{"start":{"row":315,"column":27},"end":{"row":367,"column":4},"placeholder":"..."},{"start":{"row":370,"column":26},"end":{"row":428,"column":4},"placeholder":"..."}],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":294,"column":29},"end":{"row":294,"column":29},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":true,"wrapToView":true},"firstLineState":0},"timestamp":1530600849224}